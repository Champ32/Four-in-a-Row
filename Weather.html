<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Four in a Row</title>
    <script type="text/javascript" src="phaser.min.js"></script>
    <script type="text/javascript" src="game.js"></script>

    <script>
      if('geolocation' in navigator){
        console.log('geolocation available');
        navigator.geolocation.getCurrentPosition(position => {
        const lat = position.coords.latitude;
        const long = position.coords.longitude;
        document.getElementById('latitude').textContent = lat;
        document.getElementById('longitude').textContent = long;

       var promiseWeather = fetch (`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${long}&appid=9d6cc86e1bd79488be0c201aa919b1db`)
          .then((r) => r.json())
          .then(weather => createList(weather));  
          
          function createList(weather) {
         const mainUL = document.createElement('ol');
         for (let i = 0; i < data.result.length; i++) {
         const studentLI = document.createElement('li');
         studentLI.innerHTML = data.result[i].name;

      // create list for marks
      const marksUL = document.createElement('ul');
      for (var key in data.result[i].marks) {
        const marksLI = document.createElement('li');
        marksLI.innerHTML = key + ': ' + data.result[i].marks[key];
        marksUL.appendChild(marksLI);
      }

      // append marks list to studentLI
      studentLI.appendChild(marksUL);
      // append student list to mainUL
      mainUL.appendChild(studentLI);
    }
    // append mainUL to body
    document.body.appendChild(mainUL);
  }
          
          
      });
      }
      else{
        console.log('geolocation not available');
      }

    </script>

    <p>
      latitude: <span id="latitude"></span>&deg;<br />
      longitude: <span id="longitude"></span>&deg;<br />
      Weather: Sunny
    </p>
  </head>
  <body></body>
</html>